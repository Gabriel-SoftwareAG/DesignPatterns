= The Facade Pattern

:imagesdir: ../images/ch11_Facade

== Introduction

[cols="2", frame="none", grid="none"]
|===
| Let's say you have a high-tech car with lots of advanced features like automatic parking, adaptive cruise control, and collision avoidance systems. Now, instead of having to understand how each of these systems works under the hood, you have a simplified control panel with buttons labeled "Park Assist," "Cruise Control," and "Collision Avoidance."

This control panel acts as a facade, providing you with a straightforward interface to interact with these complex systems without needing to understand all the intricate details of how they function.  
|image:facade_car.jpg[width=300, scale=50%]
|===

So, just like the facade of a building hides its inner complexities, the control panel facade hides the complexities of the car's advanced features, making them more accessible and easier to use for the driver.

== Key Components

- _Facade_: The facade acts as a simplified interface to a complex system, providing a unified and straightforward access point for interacting with multiple subsystems. In our analogy, the control panel facade hides the complexities of the car's advanced features, such as automatic parking, adaptive cruise control, and collision avoidance systems, from the driver.
- _Subsystem_: Subsystems are individual components or systems that make up the larger, complex system. In our example, the automatic parking system, adaptive cruise control, and collision avoidance systems represent subsystems of the high-tech car.
- _Client_: The client is the entity that interacts with the facade to access the functionalities provided by the subsystems. In our analogy, the driver of the car interacts with the control panel facade to activate features like park assist, cruise control, and collision avoidance.


== UML Diagrams 
Next, we will explain the concept of the Facade design pattern using UML.

=== Class Diagram
image::FacadePatternClassDiagram.png[title="The Facade Class Diagram"]
In this diagram, let's interpret the Facade Pattern using the analogy of a control panel in a high-tech car. The "Facade" class represents the control panel, which provides a simplified interface for accessing the functionalities of the car's advanced features. It holds references to three subsystems: "SubsystemClassA," "SubsystemClassB," and "SubsystemClassC," which represent the automatic parking, adaptive cruise control, and collision avoidance systems, respectively. Each subsystem encapsulates the complex functionalities of its corresponding feature. The control panel facade delegates operations to these subsystems as needed. For example, when the driver presses the "Park Assist" button on the control panel, the facade invokes the appropriate operation in "SubsystemClassA" to activate the automatic parking system. Similarly, the facade interacts with "SubsystemClassB" and "SubsystemClassC" to control the adaptive cruise control and collision avoidance systems, respectively. Overall, the Facade Pattern simplifies the interaction between the driver and the car's advanced features by providing a unified and straightforward interface, similar to how a control panel hides the complexities of a high-tech car's functionalities.

=== Sequence Diagram
image::FacadePatternSequenceDiagram.png[title="The Facade Sequence Diagram"]
In this sequence diagram, let's interpret the Facade Pattern using the analogy of a control panel in a high-tech car. The "Client" represents the driver interacting with the control panel to perform actions. When the driver initiates an action, such as activating a feature like automatic parking or adaptive cruise control, the request is forwarded to the "Facade" class, which represents the control panel. The facade then delegates the action to the appropriate subsystems: "SubsystemClassA," "SubsystemClassB," and "SubsystemClassC," which represent the automatic parking, adaptive cruise control, and collision avoidance systems, respectively. Each subsystem performs its specific action and returns the result to the facade. Finally, the facade aggregates the results and sends the action result back to the client. Overall, the Facade Pattern simplifies the interaction between the driver and the car's advanced features by providing a unified and straightforward interface, similar to how a control panel simplifies the interaction between the driver and the car's functionalities

== Implementation Walkthrough

In this example, we'll implement the Facade Pattern in Java using the analogy of a control panel in a high-tech car. We'll have four main classes: `ControlPanel`, `AutomaticParkingSystem`, `AdaptiveCruiseControlSystem`, and `CollisionAvoidanceSystem`. The `ControlPanel` class represents the facade, providing a simplified interface for interacting with the car's advanced features, while the subsystems represent the automatic parking, adaptive cruise control, and collision avoidance systems.

=== ControlPanel Class

[source,java]
----
public class ControlPanel {
    private AutomaticParkingSystem parkingSystem;
    private AdaptiveCruiseControlSystem cruiseControlSystem;
    private CollisionAvoidanceSystem collisionSystem;

    public ControlPanel() {
        this.parkingSystem = new AutomaticParkingSystem();
        this.cruiseControlSystem = new AdaptiveCruiseControlSystem();
        this.collisionSystem = new CollisionAvoidanceSystem();
    }

    public void park() {
        parkingSystem.park();
    }

    public void activateCruiseControl() {
        cruiseControlSystem.activate();
    }

    public void avoidCollision() {
        collisionSystem.avoid();
    }
}
----

The `ControlPanel` class acts as the facade, providing a simplified interface for interacting with the car's advanced features. It holds references to the subsystems: `AutomaticParkingSystem`, `AdaptiveCruiseControlSystem`, and `CollisionAvoidanceSystem`.

=== AutomaticParkingSystem Class

[source,java]
----
public class AutomaticParkingSystem {
    public void park() {
        // Implement automatic parking functionality
    }
}
----

The `AutomaticParkingSystem` class represents the subsystem responsible for automatic parking. It contains the logic for parking the car automatically.

=== AdaptiveCruiseControlSystem Class

[source,java]
----
public class AdaptiveCruiseControlSystem {
    public void activate() {
        // Implement adaptive cruise control activation
    }
}
----

The `AdaptiveCruiseControlSystem` class represents the subsystem responsible for adaptive cruise control. It contains the logic for activating the adaptive cruise control system.

=== CollisionAvoidanceSystem Class

[source,java]
----
public class CollisionAvoidanceSystem {
    public void avoid() {
        // Implement collision avoidance functionality
    }
}
----

The `CollisionAvoidanceSystem` class represents the subsystem responsible for collision avoidance. It contains the logic for avoiding collisions.

=== Usage Example

Now, let's see how the classes are used together:

[source,java]
----
public class Main {
    public static void main(String[] args) {
        ControlPanel controlPanel = new ControlPanel();
        
        // Driver uses the control panel to park the car
        controlPanel.park();
        
        // Driver activates adaptive cruise control
        controlPanel.activateCruiseControl();
        
        // Driver activates collision avoidance system
        controlPanel.avoidCollision();
    }
}
----

In this example, we create a `ControlPanel` object representing the control panel in the car. The driver uses the control panel to interact with the car's advanced features, such as parking the car automatically, activating adaptive cruise control, and avoiding collisions.

== Design Considerations

When implementing the Facade Pattern in software development for a control panel in a high-tech car, several design considerations should be taken into account:

* **Simplicity and Usability**: The primary goal of the Facade Pattern is to provide a simplified interface for interacting with a complex system. Designers should prioritize simplicity and usability when designing the facade, ensuring that it hides the complexity of the underlying subsystems and presents a straightforward interface for users.
* **Subsystem Encapsulation**: Subsystems should encapsulate their specific functionalities and complexities, allowing the facade to delegate tasks to them seamlessly. Designers should carefully define the responsibilities and interfaces of each subsystem to maintain modularity and minimize dependencies between subsystems.
* **Flexibility and Extensibility**: The Facade Pattern should allow for flexibility and extensibility in adding new features or modifying existing ones. Designers should ensure that the facade remains open for extension but closed for modification, enabling the addition of new subsystems or features without modifying the existing code.
* **Performance Considerations**: While the Facade Pattern simplifies the interaction with a complex system, designers should consider the performance implications of using the pattern. Facade operations should be efficient and lightweight, minimizing overhead and latency to ensure optimal system performance.
* **Error Handling**: The facade should handle errors gracefully and provide meaningful feedback to users in case of failures or exceptions. Designers should implement robust error-handling mechanisms within the facade to maintain system reliability and user satisfaction.


== Conclusion

The Facade Pattern is a valuable design pattern for simplifying the interaction with complex systems. By providing a unified and straightforward interface, the pattern enhances usability and reduces the cognitive load for users, making it easier to operate and manage the system's advanced features. Additionally, the pattern promotes modularity, maintainability, and flexibility by encapsulating subsystem complexities and minimizing dependencies between components. Overall, the Facade Pattern is a powerful tool for designing intuitive and user-friendly software systems, enabling users to interact with complex functionalities with ease and efficiency.
